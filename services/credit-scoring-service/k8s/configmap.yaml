apiVersion: v1
kind: ConfigMap
metadata:
  name: credit-scoring-service-config
  namespace: sparkfund
data:
  config.yaml: |
    app:
      name: credit-scoring-service
      environment: production
      log_level: info
      metrics_enabled: true
      tracing_enabled: true
      rate_limit:
        enabled: true
        requests_per_second: 100
        burst_size: 200
      security:
        cors:
          allowed_origins: ["https://api.sparkfund.com"]
          allowed_methods: ["GET", "POST", "PUT", "DELETE"]
          allowed_headers: ["Authorization", "Content-Type"]
          max_age: 3600
        headers:
          x_frame_options: "DENY"
          x_content_type_options: "nosniff"
          x_xss_protection: "1; mode=block"
          strict_transport_security: "max-age=31536000; includeSubDomains"
          content_security_policy: "default-src 'self'"
    
    database:
      host: postgres.sparkfund.svc.cluster.local
      port: 5432
      name: sparkfund
      ssl_mode: require
      max_connections: 20
      idle_timeout: 300
      connection_timeout: 10
    
    redis:
      host: redis.sparkfund.svc.cluster.local
      port: 6379
      password: ""
      db: 0
      pool_size: 10
      min_idle_conns: 5
      idle_timeout: 300
    
    credit_scoring:
      model_version: "1.0.0"
      cache_ttl: 3600
      batch_size: 100
      max_retries: 3
      timeout: 30
      risk_thresholds:
        low: 0.3
        medium: 0.6
        high: 0.8
      features:
        enabled: true
        update_interval: 24h
        max_features: 100
      scoring:
        algorithm: "weighted_sum"
        weights:
          payment_history: 0.4
          credit_utilization: 0.3
          credit_history: 0.2
          credit_mix: 0.1
      monitoring:
        enable_audit_logs: true
        log_level: "info"
        metrics_prefix: "credit_scoring"
    
    tracing:
      enabled: true
      sampler: 1.0
      exporter:
        type: jaeger
        endpoint: jaeger.sparkfund.svc.cluster.local:14268
        service_name: credit-scoring-service
    
    monitoring:
      enabled: true
      prometheus:
        enabled: true
        path: /metrics
        port: 9090
      health:
        enabled: true
        path: /health
        port: 8081 